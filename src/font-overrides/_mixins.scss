/**
 * Emit a font-family declaration with optional !important.
 *
 * Internal helper used by sans-font/mono-font so the logic is centralized.
 *
 * @param {String|Variable} $font - The font-family value (string or CSS var).
 * @param {Boolean} $important - When true append !important (default: false).
 *
 * @example
 *   @include _emit-font-family(var(--font-sans), true);
 */
@mixin _emit-font-family($font, $important: false) {

	@if $important {
		// Use !important when requested to override site styles.
		font-family: $font !important;
	} @else {
		font-family: $font;
	}
}

/**
 * Set the root --font-sans CSS variable.
 *
 * @param {String} $font - Root font key (defaults to $default-root-sans).
 *
 * @example
 *   @include set-root-font-sans("general-sans");
 */
@mixin set-root-font-sans($font: $default-root-sans) {

	:root {
		// Sets the --font-sans variable to the provided font name or falls back to a default sans-serif font
		--font-sans: var(--#{$font}-font, var(--default-sans));
	}
}

/**
 * Set the root --font-mono CSS variable.
 *
 * @param {String} $font - Root mono font key (defaults to $default-root-mono).
 *
 * @example
 *   @include set-root-font-mono("ibm-plex");
 */
@mixin set-root-font-mono($font: $default-root-mono) {

	:root {
		// Sets the --font-mono variable to the provided font name or falls back to a default monospace font
		--font-mono: var(--#{$font}-font, var(--default-mono));
	}
}

/**
 * Apply the current sans-serif font variable to a selector.
 *
 * Wrapper around _emit-font-family to make intent clear in item files.
 *
 * @param {Boolean} $important - If true, applies with !important (default: false).
 *
 * @example
 *   .selector { @include apply-font-sans(true); }
 */
@mixin apply-font-sans($important: false) {
	// Applies font-family specified in --font-sans variable with optional !important
	@include _emit-font-family(var(--font-sans), $important);
}

/**
 * Apply the current monospace font variable to a selector.
 *
 * @param {Boolean} $important - If true, applies with !important (default: false).
 *
 * @example
 *   code { @include apply-font-mono(true); }
 */
@mixin apply-font-mono($important: false) {
	// Applies font-family specified in --font-mono variable with optional !important
	@include _emit-font-family(var(--font-mono), $important);
}

/**
 * Initialize both root font variables and common font-related custom properties.
 *
 * Use at the top of item partials to ensure variables exist and common aliases are defined.
 *
 * @example
 *   @include init-root-font-aliases();
 */
@mixin init-root-font-aliases() {

	@include set-root-font-sans;
	@include set-root-font-mono;

	// Define font variables and common aliases for broader compatibility.
	:root {
		$sans-aliases: display, family-apple, family-system, headline, primary, sans-serif, system, ui;

		@each $alias in $sans-aliases {
			--font-#{$alias}: var(--font-sans);
		}
	}
}
